import{n as r}from"./notificationService-D2FGcByX.js";import{_ as v,I as h,a as m,S as E,o as n,c as l,b as e,t as _,d as c,v as u,J as f,p as g,j as b,E as w,f as p,q as x}from"./index-BY_nnN9Y.js";import{S as U,M as y}from"./SideBar-DHbSzwFa.js";const k={data(){return{isEditing:!1,user:{id:h.getId(),name:"",telephone:"",login:""}}},created(){this.fetchUserData()},methods:{fetchUserData(){this.user.id&&m.getUser(this.user.id).then(s=>{console.log(s.data),this.user.name=s.data.name,this.user.login=s.data.email,this.user.telephone=s.data.telephone}).catch(s=>{r.error("Não foi possível carregar os dados do usuário."),console.error(s)})},toggleEdit(){this.isEditing=!this.isEditing},validateForm(){const s=/^[A-Za-zÀ-ÖØ-öø-ÿ\s]{3,}$/;if(!this.user.name||!s.test(this.user.name))return r.error("Nome inválido. Use apenas letras e tenha no mínimo 3 caracteres."),!1;const t=/^\d{10,11}$/;return!this.user.telephone||!t.test(this.user.telephone)?(r.error("Telefone inválido. Deve conter 10 ou 11 dígitos."),!1):!0},updateUser(){if(!this.validateForm())return;const s={name:this.user.name,telephone:this.user.telephone};m.updateUser(this.user.id,s).then(()=>{r.success("Perfil atualizado com sucesso!"),h.setName(this.user.name),E.setPhone(this.user.telephone),this.isEditing=!1}).catch(t=>{r.error("Erro ao atualizar o perfil. Tente novamente."),console.error(t)})}}},d=s=>(g("data-v-63245fe6"),s=s(),b(),s),I={class:"profile-container"},V={class:"profile-card"},N={class:"profile-card-header"},D={class:"user-info"},P={class:"avatar-ring"},B=["src"],C={class:"user-name"},T={class:"user-email"},z={class:"profile-card-body"},O={class:"form-group"},j=d(()=>e("label",{for:"name"},"Nome",-1)),A=["disabled"],F={class:"form-group"},M=d(()=>e("label",{for:"telephone"},"Telefone",-1)),R=["disabled"],q={class:"form-group"},J=d(()=>e("label",{for:"email"},"Email",-1)),Z=d(()=>e("div",{class:"form-group"},[e("label",{for:"password"},"Senha"),e("input",{type:"password",id:"password",class:"form-control",value:"••••••••",disabled:""})],-1)),G={class:"profile-card-footer"};function H(s,t,S,se,o,a){return n(),l("div",I,[e("div",V,[e("div",N,[e("div",D,[e("div",P,[e("img",{alt:"Avatar do usuário",class:"avatar",src:`https://api.dicebear.com/8.x/initials/svg?seed=${o.user.name}`},null,8,B)]),e("div",null,[e("h3",C,_(o.user.name),1),e("p",T,_(o.user.login),1)])])]),e("div",z,[e("div",O,[j,c(e("input",{type:"text",id:"name",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=i=>o.user.name=i),disabled:!o.isEditing},null,8,A),[[u,o.user.name]])]),e("div",F,[M,c(e("input",{type:"text",id:"telephone",class:"form-control","onUpdate:modelValue":t[1]||(t[1]=i=>o.user.telephone=i),disabled:!o.isEditing},null,8,R),[[u,o.user.telephone]])]),e("div",q,[J,c(e("input",{type:"email",id:"email",class:"form-control","onUpdate:modelValue":t[2]||(t[2]=i=>o.user.login=i),disabled:""},null,512),[[u,o.user.login]])]),Z]),e("div",G,[o.isEditing?f("",!0):(n(),l("button",{key:0,class:"btn btn-edit",onClick:t[3]||(t[3]=(...i)=>a.toggleEdit&&a.toggleEdit(...i))}," Editar Perfil ")),o.isEditing?(n(),l("button",{key:1,class:"btn btn-save",onClick:t[4]||(t[4]=(...i)=>a.updateUser&&a.updateUser(...i))}," Salvar Alterações ")):f("",!0)])])])}const K=v(k,[["render",H],["__scopeId","data-v-63245fe6"]]),L=s=>(g("data-v-72651b01"),s=s(),b(),s),Q={class:"container-fluid d-flex p-0 engineer-profile-view"},W={class:"main-content engineer-profile-view"},X=L(()=>e("header",{class:"d-flex align-items-center justify-content-between"},null,-1)),Y={class:"engineer-profile-form"},$={computed:{...w({isSidebarOpen:s=>s.isSidebarOpen})}},ee=Object.assign($,{__name:"ProfileView",setup(s){return(t,S)=>(n(),l("div",Q,[p(U,{class:"d-none d-lg-block"}),e("div",{class:x(["container-fluid content-wrapper p-0",{"content-wrapper-closed":!t.isSidebarOpen}])},[p(y),e("main",W,[X,e("div",Y,[p(K)])])],2)]))}}),re=v(ee,[["__scopeId","data-v-72651b01"]]);export{re as default};
