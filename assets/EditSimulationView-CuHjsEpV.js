import{_ as C,E as D,S as E,k as p,n as U,c as d,f,b as e,t as b,g as j,w as q,d as r,v as u,h as x,J as B,q as y,L,a as S,r as M,o as c,p as N,j as O}from"./index-ByphWn24.js";import{n as z}from"./notificationService-BM-K4lsm.js";import{M as I,S as k}from"./SideBar-D3lWI4MW.js";const s=n=>(N("data-v-28179885"),n=n(),O(),n),P={class:"main-content"},T={class:"edit-simulation-view"},F={class:"view-header"},R=s(()=>e("i",{class:"bi bi-arrow-left"},null,-1)),J={key:0,class:"loading-state"},K=s(()=>e("span",{class:"spinner-border",role:"status"},null,-1)),G=s(()=>e("span",null,"Carregando dados da simulação...",-1)),H=[K,G],Q={key:1,class:"error-feedback"},W={class:"form-group"},X=s(()=>e("label",{for:"name"},"Título da Simulação",-1)),Y={class:"input-wrapper"},Z=s(()=>e("i",{class:"bi bi-card-heading input-icon"},null,-1)),$={class:"form-group"},ee=s(()=>e("label",{for:"description"},"Descrição",-1)),se={class:"input-wrapper"},oe=s(()=>e("i",{class:"bi bi-file-text-fill input-icon"},null,-1)),ae={class:"form-group"},te=s(()=>e("label",{for:"image"},"URL da Imagem de Capa",-1)),ie={class:"input-wrapper"},le=s(()=>e("i",{class:"bi bi-image input-icon"},null,-1)),ne=s(()=>e("small",null,"Cole o link para uma imagem que represente a simulação.",-1)),de={class:"form-group-fieldset"},re=s(()=>e("legend",null,[e("i",{class:"bi bi-clouds-fill"}),x(" Configurações da Unity Cloud ")],-1)),ue={class:"form-group"},ce=s(()=>e("label",{for:"productId"},"ID do Projeto (Project ID)",-1)),pe={class:"input-wrapper"},xe=s(()=>e("i",{class:"bi bi-folder2-open input-icon"},null,-1)),me={class:"form-group"},_e=s(()=>e("label",{for:"environmentId"},"ID do Ambiente (Environment ID)",-1)),ve={class:"input-wrapper"},he=s(()=>e("i",{class:"bi bi-cloud input-icon"},null,-1)),fe={class:"form-group"},be=s(()=>e("label",{for:"configId"},"ID da Configuração (Config ID)",-1)),ge={class:"input-wrapper"},ye=s(()=>e("i",{class:"bi bi-gear input-icon"},null,-1)),Se={class:"form-group"},Ie=s(()=>e("label",{for:"keyApi"},"Chave de API (API Key)",-1)),ke={class:"input-wrapper"},we=s(()=>e("i",{class:"bi bi-key-fill input-icon"},null,-1)),Ve=s(()=>e("small",null,"A chave só precisa ser fornecida se você desejar atualizá-la.",-1)),Ae={key:0,class:"error-feedback"},Ce=s(()=>e("strong",null,"Falha ao salvar:",-1)),De={class:"form-actions"},Ee=["disabled"],Ue={key:0},je=s(()=>e("span",{class:"spinner-border spinner-border-sm",role:"status"},null,-1)),qe={key:1},Be=s(()=>e("i",{class:"bi bi-check-lg"},null,-1)),Le={components:{MenuBar:I,SideBar:k},computed:{...D({isSidebarOpen:n=>n.isSidebarOpen}),theme(){return E.getTheme()}}},Me=Object.assign(Le,{__name:"EditSimulationView",props:{id:{type:String,required:!0}},setup(n){const w=L(),g=n,a=p({}),h=p(!0),m=p(!1),_=p(null),v=p(null),V=async()=>{h.value=!0,_.value=null;try{const l=await S.getSimulationById(g.id);a.value=l.data}catch(l){console.error("Falha ao carregar dados da simulação:",l),_.value="Não foi possível encontrar a simulação solicitada."}finally{h.value=!1}},A=async()=>{var l,o;m.value=!0,v.value=null;try{const i={...a.value};(!i.keyApi||i.keyApi.trim()==="")&&delete i.keyApi,await S.updateSimulation(g.id,i),z.success("Simulação atualizada com sucesso!"),w.push({name:"listSimulations"})}catch(i){console.error("Falha ao atualizar simulação:",i),v.value=((o=(l=i.response)==null?void 0:l.data)==null?void 0:o.message)||i.message||"Ocorreu um erro desconhecido."}finally{m.value=!1}};return U(()=>{V()}),(l,o)=>{const i=M("router-link");return c(),d("div",{class:y(["container-fluid d-flex dashboard-view p-0",l.theme])},[f(k,{class:"d-none d-lg-block"}),e("div",{class:y(["container-fluid content-wrapper p-0",{"content-wrapper-closed":!l.isSidebarOpen}])},[f(I),e("main",P,[e("div",T,[e("header",F,[e("h1",null,"Editar Simulação #"+b(n.id),1),f(i,{to:{name:"listSimulations"},class:"btn btn-secondary"},{default:j(()=>[R,x(" Voltar para a Lista ")]),_:1})]),h.value?(c(),d("div",J,H)):_.value?(c(),d("div",Q,[e("p",null,[e("strong",null,b(_.value),1)])])):(c(),d("form",{key:2,onSubmit:q(A,["prevent"]),class:"simulation-form"},[e("div",W,[X,e("div",Y,[Z,r(e("input",{id:"name","onUpdate:modelValue":o[0]||(o[0]=t=>a.value.name=t),type:"text",placeholder:"Ex: Simulação de Logística V1",required:""},null,512),[[u,a.value.name]])])]),e("div",$,[ee,e("div",se,[oe,r(e("textarea",{id:"description","onUpdate:modelValue":o[1]||(o[1]=t=>a.value.description=t),rows:"4",placeholder:"Descreva o objetivo e os detalhes desta simulação."},null,512),[[u,a.value.description]])])]),e("div",ae,[te,e("div",ie,[le,r(e("input",{id:"image","onUpdate:modelValue":o[2]||(o[2]=t=>a.value.image=t),type:"url",placeholder:"https://exemplo.com/imagem.png"},null,512),[[u,a.value.image]])]),ne]),e("fieldset",de,[re,e("div",ue,[ce,e("div",pe,[xe,r(e("input",{id:"productId","onUpdate:modelValue":o[3]||(o[3]=t=>a.value.productId=t),type:"text",placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",required:""},null,512),[[u,a.value.productId]])])]),e("div",me,[_e,e("div",ve,[he,r(e("input",{id:"environmentId","onUpdate:modelValue":o[4]||(o[4]=t=>a.value.environmentId=t),type:"text",placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"},null,512),[[u,a.value.environmentId]])])]),e("div",fe,[be,e("div",ge,[ye,r(e("input",{id:"configId","onUpdate:modelValue":o[5]||(o[5]=t=>a.value.configId=t),type:"text",placeholder:"xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx",required:""},null,512),[[u,a.value.configId]])])]),e("div",Se,[Ie,e("div",ke,[we,r(e("input",{id:"keyApi","onUpdate:modelValue":o[6]||(o[6]=t=>a.value.keyApi=t),type:"password",placeholder:"Deixe em branco para manter a chave atual"},null,512),[[u,a.value.keyApi]])]),Ve])]),v.value?(c(),d("div",Ae,[e("p",null,[Ce,x(" "+b(v.value),1)])])):B("",!0),e("div",De,[e("button",{type:"submit",class:"btn btn-primary",disabled:m.value},[m.value?(c(),d("span",Ue,[je,x(" Salvando... ")])):(c(),d("span",qe,[Be,x(" Salvar Alterações ")]))],8,Ee)])],32))])])],2)],2)}}}),Pe=C(Me,[["__scopeId","data-v-28179885"]]);export{Pe as default};
