import{M as O,S as U}from"./SideBar-DS-ollf_.js";import{_ as A,k as v,M as z,l as M,n as B,o as s,c as t,b as a,d as g,K as E,F as S,G as w,t as _,J as V,h as y,v as k,i as P,a as D,p as F,j as J,E as q,f as C,q as L}from"./index-C4WPaz_x.js";const d=r=>(F("data-v-e9be9fa3"),r=r(),J(),r),T={class:"simulation-controller-view"},Z={class:"control-panel"},G=P('<div class="panel-header" data-v-e9be9fa3><div class="header-content" data-v-e9be9fa3><h2 class="fw-bold" data-v-e9be9fa3>Editor de Configuração</h2><p class="text-muted" data-v-e9be9fa3> Altere os parâmetros da simulação em tempo real. </p></div></div><div class="separator" data-v-e9be9fa3></div>',2),R={key:0,class:"parameter-group"},H=d(()=>a("label",{for:"config-selector",class:"fw-bold"},"Configuração",-1)),Q=["value"],W={key:1,class:"alert alert-success"},X=d(()=>a("i",{class:"bi bi-check-circle-fill me-2"},null,-1)),Y={key:2,class:"text-center p-4"},K=d(()=>a("div",{class:"spinner-border text-primary",role:"status"},null,-1)),ee=d(()=>a("p",{class:"mt-2"},"Carregando configuração da Unity...",-1)),se=[K,ee],te={key:3,class:"alert alert-danger"},ae=d(()=>a("strong",null,"Erro:",-1)),oe={key:4,class:"parameters-form"},le=["for"],ie=["id","onUpdate:modelValue"],ne=["id","onUpdate:modelValue"],re=["id","value","onInput"],ce=d(()=>a("small",null,"Separe os itens por vírgula.",-1)),de={key:3,class:"nested-group"},ue=["for"],pe=["id","onUpdate:modelValue"],me=d(()=>a("div",{class:"separator"},null,-1)),_e={class:"action-buttons"},fe=["disabled"],ve={key:0,class:"spinner-border spinner-border-sm me-2",role:"status"},be={key:1,class:"bi bi-cloud-upload-fill me-2"},he=["disabled"],ge=d(()=>a("i",{class:"bi bi-arrow-counterclockwise me-2"},null,-1)),Se={__name:"SimulationController",props:{simulationId:{type:String,required:!0}},setup(r){const f=r,u=v(!0),b=v(null),p=v([]),h=v(""),i=z({}),I=v({});async function $(){var l,n;u.value=!0,b.value=null;try{const e=await D.getSimulationConfig(f.simulationId);p.value=e.data,p.value.length>0&&(h.value=p.value[0].key)}catch(e){console.error("Falha ao buscar configurações:",e),b.value=((n=(l=e.response)==null?void 0:l.data)==null?void 0:n.message)||e.message}finally{u.value=!1}}M(h,l=>{if(!l)return;const n=p.value.find(e=>e.key===l);n&&(Object.keys(i).forEach(e=>delete i[e]),Object.assign(i,n.value),I.value=JSON.parse(JSON.stringify(n.value)))});function N(){Object.assign(i,I.value)}return B($),M(()=>f.simulationId,$),(l,n)=>(s(),t("div",T,[a("div",Z,[G,p.value.length>0?(s(),t("div",R,[H,g(a("select",{id:"config-selector",class:"form-select","onUpdate:modelValue":n[0]||(n[0]=e=>h.value=e)},[(s(!0),t(S,null,w(p.value,e=>(s(),t("option",{key:e.key,value:e.key},_(e.key),9,Q))),128))],512),[[E,h.value]])])):V("",!0),l.successMessage?(s(),t("div",W,[X,y(" "+_(l.successMessage),1)])):V("",!0),u.value?(s(),t("div",Y,se)):b.value?(s(),t("div",te,[ae,y(" "+_(b.value),1)])):(s(),t("div",oe,[(s(!0),t(S,null,w(i,(e,o)=>(s(),t("div",{key:o,class:"parameter-group"},[a("label",{for:o,class:"text-capitalize"},_(o.replace(/([A-Z])/g," $1")),9,le),typeof e=="number"?g((s(),t("input",{key:0,id:o,type:"number",step:"0.1",class:"form-control","onUpdate:modelValue":m=>i[o]=m},null,8,ie)),[[k,i[o],void 0,{number:!0}]]):typeof e=="string"?g((s(),t("input",{key:1,id:o,type:"text",class:"form-control","onUpdate:modelValue":m=>i[o]=m},null,8,ne)),[[k,i[o]]]):Array.isArray(e)?(s(),t(S,{key:2},[a("input",{id:o,type:"text",class:"form-control",value:e.join(", "),onInput:m=>i[o]=m.target.value.split(",").map(c=>c.trim())},null,40,re),ce],64)):typeof e=="object"&&e!==null?(s(),t("fieldset",de,[(s(!0),t(S,null,w(e,(m,c)=>(s(),t("div",{key:c,class:"parameter-group-nested"},[a("label",{for:`${o}-${c}`,class:"text-capitalize"},_(c.replace(/([A-Z])/g," $1")),9,ue),g(a("input",{id:`${o}-${c}`,type:"number",step:"0.1",class:"form-control form-control-sm","onUpdate:modelValue":x=>i[o][c]=x},null,8,pe),[[k,i[o][c],void 0,{number:!0}]])]))),128))])):V("",!0)]))),128))])),me,a("div",_e,[a("button",{class:"btn btn-primary w-100",onClick:n[1]||(n[1]=(...e)=>l.updateParameters&&l.updateParameters(...e)),disabled:u.value||l.isSubmitting},[l.isSubmitting?(s(),t("span",ve)):(s(),t("i",be)),y(" "+_(l.isSubmitting?"Atualizando...":"Atualizar na Unity"),1)],8,fe),a("button",{class:"btn btn-secondary w-100 mt-2",onClick:N,disabled:u.value||l.isSubmitting},[ge,y(" Resetar Alterações ")],8,he)])])]))}},j=A(Se,[["__scopeId","data-v-e9be9fa3"]]),ye={class:"container-fluid d-flex dashboard-view p-0"},we={class:"main-content p-4"},Ve={name:"SimulationManagerView",components:{MenuBar:O,SideBar:U,SimulationController:j},data(){return{}},computed:{...q({isSidebarOpen:r=>r.isSidebarOpen})}},ke=Object.assign(Ve,{setup(r){return(f,u)=>(s(),t("div",ye,[C(U,{class:"d-none d-lg-block"}),a("div",{class:L(["container-fluid content-wrapper p-0",{"content-wrapper-closed":!f.isSidebarOpen}])},[C(O),a("main",we,[C(j,{simulationId:f.$route.params.id},null,8,["simulationId"])])],2)]))}}),$e=A(ke,[["__scopeId","data-v-ccf1f024"]]);export{$e as default};
